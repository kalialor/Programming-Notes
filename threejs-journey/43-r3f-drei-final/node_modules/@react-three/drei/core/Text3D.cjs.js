"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@babel/runtime/helpers/extends"),t=require("react"),r=require("@react-three/fiber"),n=require("suspend-react"),s=require("three-stdlib");function u(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var o=u(e),c=i(t);const l=["string","number"],a=c.forwardRef((({font:e,letterSpacing:u=0,lineHeight:i=1,size:a=1,height:f=.2,bevelThickness:m=.1,bevelSize:b=.01,bevelEnabled:d=!1,bevelOffset:g=0,bevelSegments:h=4,curveSegments:p=8,smooth:v,children:y,...x},O)=>{c.useMemo((()=>r.extend({RenamedTextGeometry:s.TextGeometry})),[]);const j=c.useRef(null),S=n.suspend((async()=>{let t="string"==typeof e?await(await fetch(e)).json():e;return(new s.FontLoader).parse(t)}),[e]),E=t.useMemo((()=>({font:S,size:a,height:f,bevelThickness:m,bevelSize:b,bevelEnabled:d,bevelSegments:h,bevelOffset:g,curveSegments:p,letterSpacing:u,lineHeight:i})),[S,a,f,m,b,d,h,g,p,u,i]),[M,...T]=t.useMemo((()=>(e=>{let t="";const r=[];return c.Children.forEach(e,(e=>{l.includes(typeof e)?t+=e+"":r.push(e)})),[t,...r]})(y)),[y]),q=c.useMemo((()=>[M,E]),[M,E]);return c.useLayoutEffect((()=>{v&&(j.current.geometry=s.mergeVertices(j.current.geometry,v),j.current.geometry.computeVertexNormals())}),[q,v]),c.useImperativeHandle(O,(()=>j.current),[]),c.createElement("mesh",o.default({},x,{ref:j}),c.createElement("renamedTextGeometry",{args:q}),T)}));exports.Text3D=a;
