"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@babel/runtime/helpers/extends"),t=require("@react-three/fiber"),r=require("react"),n=require("three-stdlib");function s(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var o=s(e),u=a(r);const c=u.forwardRef((({makeDefault:e,events:r,camera:s,regress:a,domElement:c,enableDamping:i=!0,onChange:d,onStart:l,onEnd:f,...b},m)=>{const v=t.useThree((e=>e.invalidate)),h=t.useThree((e=>e.camera)),E=t.useThree((e=>e.gl)),p=t.useThree((e=>e.events)),g=t.useThree((e=>e.setEvents)),O=t.useThree((e=>e.set)),j=t.useThree((e=>e.get)),T=t.useThree((e=>e.performance)),L=s||h,y=c||p.connected||E.domElement,q=u.useMemo((()=>new n.OrbitControls(L)),[L]);return t.useFrame((()=>{q.enabled&&q.update()}),-1),u.useEffect((()=>(q.connect(y),()=>{q.dispose()})),[y,a,q,v]),u.useEffect((()=>{r&&g({enabled:!0});const e=e=>{v(),a&&T.regress(),d&&d(e)},t=e=>{l&&l(e),r||g({enabled:!1})},n=e=>{f&&f(e),r||g({enabled:!0})};return q.addEventListener("change",e),q.addEventListener("start",t),q.addEventListener("end",n),()=>{q.removeEventListener("start",t),q.removeEventListener("end",n),q.removeEventListener("change",e)}}),[d,l,f,q,v,r,g]),u.useEffect((()=>{if(e){const e=j().controls;return O({controls:q}),()=>O({controls:e})}}),[e,q]),u.createElement("primitive",o.default({ref:m,object:q,enableDamping:i},b))}));exports.OrbitControls=c;
